<div class="map-container" id='legend'>

    <ui-gmap-google-map id='projects-map'
        center='map.center'
        control='control'
        zoom='map.zoom'
        refresh='1'
        options='map.options'>

        <ui-gmap-window
            show="map.window.show"
            coords="map.window.model"
            options="map.window.options"
            closeClick="map.window.closeClick()"
            templateUrl="'modules/projects/client/views/projects-partials/projects-map-window.html'"
            templateParameter="map.window.model"
            ng-cloak>
        </ui-gmap-window>

        <ui-gmap-markers
            models="projects"
            idKey="'_id'"
            coords="'self'"
            type="'cluster'"
            clusterOptions="map.clusterOptions"
            events="map.markersEvents">
        </ui-gmap-marker>

        <ui-gmap-layer  ng-repeat="layer in KMLLayers"
            type="KmlLayer"
            options="layer"
            show="layer.show">
        </ui-gmap-layer>

    </ui-gmap-google-map>
    <div class="row map-filter hidden">
        <div class="col-sm-12">
            <div class="form-inline">
                <div class="form-group form-group-sm">
                    <span class="form-control-static">Projects Found: {{ projects.length }}</span><br>
                </div>
            </div>
        </div>
    </div>

</div>